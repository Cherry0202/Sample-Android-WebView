(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70e4469c"],{"7ecb":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),a=Object(c["N"])("data-v-d86248c8");Object(c["y"])("data-v-d86248c8");var s={class:"message-wrap",ref:"chatLog"},r={key:0,class:"teacher-message"},o={class:"says message"},u={key:1,class:"my-message message"},i={class:"form-wrap"};Object(c["w"])();var b=a((function(e,t,n,a,b,j){var l,d=Object(c["D"])("Header"),m=Object(c["D"])("font-awesome-icon");return Object(c["v"])(),Object(c["f"])(c["a"],null,[Object(c["j"])(d,{title:null===(l=e.instructor)||void 0===l?void 0:l.name},null,8,["title"]),Object(c["j"])("div",s,[(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(e.messages,(function(t,n){return Object(c["v"])(),Object(c["f"])("div",{key:n},["instructor"===t.sender?(Object(c["v"])(),Object(c["f"])("div",r,[Object(c["j"])("img",{src:e.instructor.icon,alt:"",class:"face-icon"},null,8,["src"]),Object(c["j"])("p",o,Object(c["F"])(t.message),1)])):Object(c["g"])("",!0),"student"===t.sender?(Object(c["v"])(),Object(c["f"])("p",u,Object(c["F"])(t.message),1)):Object(c["g"])("",!0)])})),128))],512),Object(c["j"])("div",i,[Object(c["j"])("form",{onSubmit:t[2]||(t[2]=Object(c["M"])((function(){return e.submit.apply(e,arguments)}),["prevent"]))},[Object(c["j"])("label",null,[Object(c["L"])(Object(c["j"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.state.message=t}),type:"text",placeholder:e.$t("notice-message.input")},null,8,["placeholder"]),[[c["I"],e.state.message]])]),Object(c["j"])("button",{type:"submit",class:"send-button",disabled:!e.state.message.length},[Object(c["j"])(m,{icon:e.sendIcon,class:"icon"},null,8,["icon"])],8,["disabled"])],32)])],64)})),j=n("0418"),l=n("c074"),d=n("1840"),m=n("8785"),O=n("00b9");function f(){var e=Object(m["a"])(["\n  query NoticeMessage($chat_room_id: uuid) {\n    ChatRooms(where: { id: { _eq: $chat_room_id } }) {\n      Course {\n        Instructor {\n          icon\n          name\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function g(){var e=Object(m["a"])(["\n  subscription NoticeMessages($chat_room_id: uuid) {\n    Chats(where: { chat_room_id: { _eq: $chat_room_id } }, order_by: { created_at: asc }) {\n      message\n      created_at\n      sender\n    }\n  }\n"]);return g=function(){return e},e}var v=Object(O["gql"])(g()),h=Object(O["gql"])(f()),_=v;function p(){var e=Object(m["a"])(["\n  mutation InsertChat($chat_room_id: uuid, $message: String) {\n    insert_Chats(objects: { chat_room_id: $chat_room_id, message: $message, sender: student }) {\n      returning {\n        created_at\n      }\n    }\n  }\n"]);return p=function(){return e},e}var y=Object(O["gql"])(p()),w=y,$=n("6c02"),C=Object(c["k"])({components:{Header:j["a"]},setup:function(){var e=Object($["c"])(),t=e.currentRoute,n=t.value.params.id,a=Object(c["z"])({message:""}),s=Object(c["A"])([]),r=Object(c["A"])(),o=Object(d["e"])(_,{chat_room_id:n}),u=o.result,i=Object(d["c"])(h,{chat_room_id:n}),b=i.result,j=Object(d["d"])(b,null,(function(e){return e.ChatRooms[0].Course.Instructor})),m=function(){Object(c["p"])((function(){r.value&&(r.value.scrollTop=r.value.scrollHeight)}))};Object(c["K"])(u,(function(e){s.value=e.Chats,m()}));var O=Object(d["b"])(w,(function(){return{variables:{chat_room_id:n,message:a.message}}})),f=O.mutate,g=function(){f(),a.message=""},v=Object(c["d"])((function(){return l["m"]}));return{sendIcon:v,messages:s,instructor:j,state:a,submit:g,chatLog:r}}});n("ecf6");C.render=b,C.__scopeId="data-v-d86248c8";t["default"]=C},b0c0:function(e,t,n){var c=n("83ab"),a=n("9bf2").f,s=Function.prototype,r=s.toString,o=/^\s*function ([^ (]*)/,u="name";c&&!(u in s)&&a(s,u,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(e){return""}}})},ecf6:function(e,t,n){"use strict";n("fa52")},fa52:function(e,t,n){}}]);
//# sourceMappingURL=chunk-70e4469c.cb773836.js.map