(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40eab8fc"],{"2cae":function(e,t,c){"use strict";c("32ea")},"32ea":function(e,t,c){},"7ecb":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=Object(n["N"])("data-v-56249bdd");Object(n["y"])("data-v-56249bdd");var s={class:"message-wrap",ref:"chatLog"},r={key:0,class:"teacher-message"},o={class:"says message"},u={key:1,class:"my-message message"},i={class:"form-wrap"};Object(n["w"])();var b=a((function(e,t,c,a,b,j){var d=Object(n["D"])("Header"),l=Object(n["D"])("font-awesome-icon");return Object(n["v"])(),Object(n["f"])(n["a"],null,[Object(n["j"])(d,{title:"Name"}),Object(n["j"])("div",s,[(Object(n["v"])(!0),Object(n["f"])(n["a"],null,Object(n["B"])(e.messages,(function(t,c){return Object(n["v"])(),Object(n["f"])("div",{key:c},["instructor"===t.sender?(Object(n["v"])(),Object(n["f"])("div",r,[Object(n["j"])("img",{src:e.instructorIcon,alt:"",class:"face-icon"},null,8,["src"]),Object(n["j"])("p",o,Object(n["F"])(t.message),1)])):Object(n["g"])("",!0),"student"===t.sender?(Object(n["v"])(),Object(n["f"])("p",u,Object(n["F"])(t.message),1)):Object(n["g"])("",!0)])})),128))],512),Object(n["j"])("div",i,[Object(n["j"])("form",{onSubmit:t[2]||(t[2]=Object(n["M"])((function(){return e.submit.apply(e,arguments)}),["prevent"]))},[Object(n["j"])("label",null,[Object(n["L"])(Object(n["j"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.state.message=t}),type:"text",placeholder:e.$t("notice-message.input")},null,8,["placeholder"]),[[n["I"],e.state.message]])]),Object(n["j"])("button",{type:"submit",class:"send-button",disabled:!e.state.message.length},[Object(n["j"])(l,{icon:e.sendIcon,class:"icon"},null,8,["icon"])],8,["disabled"])],32)])],64)})),j=c("0418"),d=c("c074"),l=c("1840"),m=c("8785"),O=c("00b9");function g(){var e=Object(m["a"])(["\n  query NoticeMessage($chat_room_id: uuid) {\n    ChatRooms(where: { id: { _eq: $chat_room_id } }) {\n      Course {\n        Instructor {\n          icon\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function f(){var e=Object(m["a"])(["\n  subscription NoticeMessages($chat_room_id: uuid) {\n    Chats(where: { chat_room_id: { _eq: $chat_room_id } }, order_by: { created_at: asc }) {\n      message\n      created_at\n      sender\n    }\n  }\n"]);return f=function(){return e},e}var _=Object(O["gql"])(f()),v=Object(O["gql"])(g()),h=_;function p(){var e=Object(m["a"])(["\n  mutation InsertChat($chat_room_id: uuid, $message: String) {\n    insert_Chats(objects: { chat_room_id: $chat_room_id, message: $message, sender: student }) {\n      returning {\n        created_at\n      }\n    }\n  }\n"]);return p=function(){return e},e}var w=Object(O["gql"])(p()),y=w,I=c("6c02"),$=Object(n["k"])({components:{Header:j["a"]},setup:function(){var e=Object(I["c"])(),t=e.currentRoute,c=t.value.params.id,a=Object(n["z"])({message:""}),s=Object(n["A"])([]),r=Object(n["A"])(),o=Object(l["e"])(h,{chat_room_id:c}),u=o.result,i=Object(l["c"])(v,{chat_room_id:c}),b=i.result,j=Object(l["d"])(b,null,(function(e){return e.ChatRooms[0].Course.Instructor.icon})),m=function(){Object(n["p"])((function(){r.value&&(r.value.scrollTop=r.value.scrollHeight)}))};Object(n["K"])(u,(function(e){s.value=e.Chats,m()}));var O=Object(l["b"])(y,(function(){return{variables:{chat_room_id:c,message:a.message}}})),g=O.mutate,f=function(){g(),a.message=""},_=Object(n["d"])((function(){return d["m"]}));return{sendIcon:_,messages:s,instructorIcon:j,state:a,submit:f,chatLog:r}}});c("2cae");$.render=b,$.__scopeId="data-v-56249bdd";t["default"]=$}}]);
//# sourceMappingURL=chunk-40eab8fc.1d9388cc.js.map